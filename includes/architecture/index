<h1 id='architecture'>ARCHITECTURE</h1>
<h2 id='roles'>Roles</h2>

<p>사용자 권한은 <code>anonymous</code>, <code>verified</code>, <code>account</code> 세 가지로 구분됩니다. 각각의 권한은 사용자의 인증 상태를 나타내며, 권한에 따라 사용할 수 있는 API가 달라집니다.</p>

<p>해당 문서에서는 권한을 <strong>Scopes</strong>로 표기합니다. 각각의 권한은 <code>user:{role}</code> 형식으로 표기합니다.</p>

<ul>
<li><code>user:anonymous</code></li>
<li><code>user:verified</code></li>
<li><code>user:account</code></li>
</ul>

<h3 id='anonymous'>Anonymous</h3>

<p>비인증 사용자는 <code>user:anonymous</code> 역할을 가집니다. 최초 가입 시 이 권한을 가지며, 이후 인증을 통해 <code>user:verified</code> 역할을 얻습니다.</p>

<h3 id='verified'>Verified</h3>

<p>인증된 사용자는 <code>user:verified</code> 역할을 가집니다. 가입 시 제공받은 핸드폰 번호를 통해 SMS 문자를 발송하고, 해당 문자에 포함된 인증 코드를 입력하여 인증을 진행합니다.</p>

<p>인증된 사용자는 지갑을 생성하여 <code>user:account</code> 역할을 얻을 수 있습니다.</p>

<h3 id='account'>Account</h3>

<p>지갑 소유자는 계정 <code>user:account</code> 역할을 가집니다. 지갑을 생성하면 이 권한을 얻습니다.</p>

<p>계정 역할은 생성된 지갑을 통해 토큰을 송금할 수 있습니다.</p>

<h2 id='status-codes'>Status Codes</h2>

<table><thead>
<tr>
<th>Code</th>
<th>Message</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>OK</td>
<td>Successful request</td>
</tr>
<tr>
<td>201</td>
<td>Created</td>
<td>New object saved</td>
</tr>
<tr>
<td>204</td>
<td>No content</td>
<td>Object deleted</td>
</tr>
<tr>
<td>400</td>
<td>Bad Request</td>
<td>Returns JSON with the error message</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>Couldn&#39;t authenticate your request</td>
</tr>
<tr>
<td>403</td>
<td>Invalid scope</td>
<td>User hasn&#39;t authorized necessary scope</td>
</tr>
<tr>
<td>404</td>
<td>Not Found</td>
<td>No such object</td>
</tr>
<tr>
<td>409</td>
<td>Conflict</td>
<td>Object already exists</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error</td>
<td>Something went wrong</td>
</tr>
</tbody></table>

<h2 id='request-methods'>Request Methods</h2>

<p>As per RESTful design patterns, Paradise API implements following HTTP verbs:</p>

<ul>
<li><code>GET</code>: Read resources</li>
<li><code>POST</code>: Create new resources</li>
<li><code>PUT</code>: Modify existing resources</li>
<li><code>DELETE</code>: Remove resources</li>
</ul>

<p>When making requests, arguments can be passed as params, form data or JSON with correct Content-Type header.</p>

<h2 id='versioning'>Versioning</h2>

<p>The API is versioned using the URI of the request. The current version is <code>v1</code>. The version is specified in the URI as follows:</p>

<blockquote>
<p>URI Versioning</p>
</blockquote>

<div class="highlight"><pre class="highlight plaintext"><code>https://api.paradise.game/v1
</code></pre></div>

<p>The versioning of the API is based on the <a href="http://semver.org/">Semantic Versioning</a> specification.</p>

<h2 id='transaction-fee'>Transaction Fee</h2>

<p>트랜잭션 수수료는 블록체인에 트랜잭션을 생성하므로써 발생하는 비용을 의미합니다.</p>

<p>Paradise API에서 제공하는 온체인 서비스는 다음과 같습니다.</p>

<ul>
<li><a href="#withdraw-funds">Withdraw Funds</a></li>
</ul>

<h3 id='withdraw-funds-api'>Withdraw Funds API</h3>

<p>사용자가 지갑에 보유한 자산을 다른 지갑으로 전송하는 기능입니다. 이때 지갑에 보유한 자산은 트랜잭션 수수료를 지불할 만큼 충분한 양이어야 합니다.</p>

<p>전송할 자산의 양에 따라 트랜잭션 수수료가 다르게 발생하며, 총 전송량에 1%가 수수료로 부과됩니다. 예를 들어, 100 GNI를 전송하려면 1 GNI가 수수료로 부과되어 총 101 GNI가 소모됩니다.</p>

<div class="highlight"><pre class="highlight plaintext"><code>전송량(100 GNI) + 수수료(1 GNI) = 총 소모량(101 GNI)
</code></pre></div>

<h2 id='off-chain-system'>Off-Chain System</h2>

<p>트랜잭션 수수료와 느린 응답속도 등을 고려했을 때, 잦은 On-Chain 작업은 매우 비효율적입니다. 따라서, Off-Chain 시스템을 통해 On-Chain 작업을 최소화하고자 합니다. Off-Chain 시스템은 다음과 같은 역할을 수행합니다.</p>

<ul>
<li><p><strong>사용자 인증</strong>: 사용자의 개인키를 통해 사용자를 인증합니다.</p></li>
<li><p><strong>사용자의 토큰 잔액 관리</strong>: 사용자의 토큰 잔액을 관리합니다.</p></li>
<li><p><strong>사용자의 토큰 전송</strong>: 사용자의 토큰을 전송합니다.</p></li>
<li><p><strong>사용자의 토큰 전송 내역 관리</strong>: 사용자의 토큰 전송 내역을 관리합니다.</p></li>
<li><p><strong>사용자의 토큰 전송 내역 조회</strong>: 사용자의 토큰 전송 내역을 조회합니다.</p></li>
</ul>

<h3 id='version-1-0'>Version 1.0</h3>

<p>현재 <code>v1</code>에서는 다음과 같은 Off-Chain 시스템을 제공합니다.</p>

<ul>
<li><a href="#create-wallet">어카운트 제공</a>: 블록체인 계정을 제공합니다.</li>
<li><a href="#transfer">GNI 이체 서비스</a>: 어카운트 간 GNI를 전송 및 수신합니다.</li>
</ul>
